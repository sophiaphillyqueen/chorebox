# configure: Configures -chorebox-
# Copyright (C) 2014  Sophia Elizabeth Shapira

# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.

# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.

# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <http://www.gnu.org/licenses/>.

# ########################

# First, I initialize the $origidir variable to the source-code
# directory.
origidir="$(dirname "${0}")"
abs_origidir="$(cd "${origidir}" && pwd)"


# BEGIN PART TO IDENTIFY LOCAL-TARGET C COMPILER:
# This part must be cut-and-paste for original twin-configure
# scripts in the primary -chorebox- package -- but should be
# un-necessary in any subsequent -chorebox- packages.
empty_var=""
local_cc="${CC_LOCAL}"
if [ $local_cc == $empty_var ]; then
  local_cc="${CC}"
fi
if [ $local_cc == $empty_var ]; then
  local_cc=gcc
fi
for zambusa in "${@}"
do
  zambusb="$(echo "${zambusa}" | cut -b 1-3)"
  patern_aa="CC="
  if [ $zambusb == $patern_aa ]; then
    local_cc="$(echo "${zambusa}" | cut -b 4-10000)"
  fi
done
# END PART TO IDENTIFY LOCAL-TARGET C COMPILER:


# Now I assemble the file: temporary--chorebox-configure.pl --- a
# *temporary* copy of the configuration script.
sh "${origidir}/perlstrict.sh" temporary--chorebox-configure.pl
sh "${origidir}/perldumpy.sh" "${origidir}/chorebox-configure.seg.pl" \
temporary--chorebox-configure.pl

sh "${origidir}/perldumpy.sh" "${origidir}/autom.fn.pl" \
temporary--chorebox-configure.pl

sh "${origidir}/perldumpy.sh" "${origidir}/apnd_shrunk_argument.fn.pl" \
temporary--chorebox-configure.pl

sh "${origidir}/perldumpy.sh" "${origidir}/goodarray.fn.pl" \
temporary--chorebox-configure.pl



exec perl temporary--chorebox-configure.pl --srcdir="${origidir}" "${@}"

